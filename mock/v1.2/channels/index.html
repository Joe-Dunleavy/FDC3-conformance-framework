<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="../lib/index.css" />
</head>

<body>
  <p>Conformance Framework (v1.2) Channels Mock App</p>
  <p>This app is only used by the conformance framework for test purposes</p>
  <p></p>
  <p id="context"></p>
  <script src="../lib/mock-functions.js"></script>
  <script src="../lib/constants.js"></script>
  <!-- <script src="lib/channelService-1_2.js"></script> -->
  <script src="../../lib/fdc3-compliance.js"></script>
  <script>
    let stats = document.getElementById("context");
    onFdc3Ready().then(() => {
      let firedOnce = false;
      //await commands from App A, then execute commands
      window.fdc3.addContextListener(
        "channelsAppContext",
        (context) => {
          if (firedOnce === false) {
            firedOnce = true;
            stats.innerHTML += "start";
            const commandExecutor = new Fdc3Compliance.CommandExecutor();
            stats.innerHTML += JSON.stringify(commandExecutor);

            //  if(context.config.fdc3ApiVersion === "1.2"){
            //   const commandExecutor = new Fdc3CommandExecutor1_2();
            //   commandExecutor.executeCommands(context.commands, context.config);
            //  }else if(context.config.fdc3ApiVersion === "2.0"){
            //    const commandExecutor = new Fdc3CommandExecutor2_0();
            //    commandExecutor.executeCommands(context.commands, context.config);
            //  }
          }
        });
    });
  </script>
</body>

</html>